this.CharrueSchemaTable=function(){"use strict";var S={name:"MultiColumn",props:{label:String,prop:[String,Number],children:Array}};const x=S;var h=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-table-column",{attrs:{label:e.label,prop:e.prop}},[e.children&&e.children.length>0?e._l(e.children,function(l,i){return t("multi-column",{key:"multi-column-"+(l.prop||"")+"-"+i,attrs:{label:l.label,prop:l.prop,children:l.children||[]}})}):e._e()],2)},C=[];h._withStripped=!0;const P=void 0,O=void 0,A=!1;function D(e,r,t,l,i,c,n,a){const o=(typeof t=="function"?t.options:t)||{};return o.__file="C:\\all\\code\\plow\\charrue-el\\packages\\schema-table-internal\\libs\\multi-column.vue",o.render||(o.render=e.render,o.staticRenderFns=e.staticRenderFns,o._compiled=!0,i&&(o.functional=!0)),o._scopeId=l,o}var j=D({render:h,staticRenderFns:C},P,x,O,A),$=M;function u(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function M(e){if(e=e||{},e.circles)return T(e);return e.proto?l:t;function r(i,c){for(var n=Object.keys(i),a=new Array(n.length),o=0;o<n.length;o++){var s=n[o],f=i[s];typeof f!="object"||f===null?a[s]=f:f instanceof Date?a[s]=new Date(f):ArrayBuffer.isView(f)?a[s]=u(f):a[s]=c(f)}return a}function t(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return r(i,t);if(i instanceof Map)return new Map(r(Array.from(i),t));if(i instanceof Set)return new Set(r(Array.from(i),t));var c={};for(var n in i)if(Object.hasOwnProperty.call(i,n)!==!1){var a=i[n];typeof a!="object"||a===null?c[n]=a:a instanceof Date?c[n]=new Date(a):a instanceof Map?c[n]=new Map(r(Array.from(a),t)):a instanceof Set?c[n]=new Set(r(Array.from(a),t)):ArrayBuffer.isView(a)?c[n]=u(a):c[n]=t(a)}return c}function l(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return r(i,l);if(i instanceof Map)return new Map(r(Array.from(i),l));if(i instanceof Set)return new Set(r(Array.from(i),l));var c={};for(var n in i){var a=i[n];typeof a!="object"||a===null?c[n]=a:a instanceof Date?c[n]=new Date(a):a instanceof Map?c[n]=new Map(r(Array.from(a),l)):a instanceof Set?c[n]=new Set(r(Array.from(a),l)):ArrayBuffer.isView(a)?c[n]=u(a):c[n]=l(a)}return c}}function T(e){var r=[],t=[];return e.proto?c:i;function l(n,a){for(var o=Object.keys(n),s=new Array(o.length),f=0;f<o.length;f++){var d=o[f],p=n[d];if(typeof p!="object"||p===null)s[d]=p;else if(p instanceof Date)s[d]=new Date(p);else if(ArrayBuffer.isView(p))s[d]=u(p);else{var w=r.indexOf(p);w!==-1?s[d]=t[w]:s[d]=a(p)}}return s}function i(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return l(n,i);if(n instanceof Map)return new Map(l(Array.from(n),i));if(n instanceof Set)return new Set(l(Array.from(n),i));var a={};r.push(n),t.push(a);for(var o in n)if(Object.hasOwnProperty.call(n,o)!==!1){var s=n[o];if(typeof s!="object"||s===null)a[o]=s;else if(s instanceof Date)a[o]=new Date(s);else if(s instanceof Map)a[o]=new Map(l(Array.from(s),i));else if(s instanceof Set)a[o]=new Set(l(Array.from(s),i));else if(ArrayBuffer.isView(s))a[o]=u(s);else{var f=r.indexOf(s);f!==-1?a[o]=t[f]:a[o]=i(s)}}return r.pop(),t.pop(),a}function c(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return l(n,c);if(n instanceof Map)return new Map(l(Array.from(n),c));if(n instanceof Set)return new Set(l(Array.from(n),c));var a={};r.push(n),t.push(a);for(var o in n){var s=n[o];if(typeof s!="object"||s===null)a[o]=s;else if(s instanceof Date)a[o]=new Date(s);else if(s instanceof Map)a[o]=new Map(l(Array.from(s),c));else if(s instanceof Set)a[o]=new Set(l(Array.from(s),c));else if(ArrayBuffer.isView(s))a[o]=u(s);else{var f=r.indexOf(s);f!==-1?a[o]=t[f]:a[o]=c(s)}}return r.pop(),t.pop(),a}}const v="$CharrueSchemaTablePluginOptions";var R=Object.defineProperty,E=Object.defineProperties,z=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,b=(e,r,t)=>r in e?R(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,_=(e,r)=>{for(var t in r||(r={}))B.call(r,t)&&b(e,t,r[t]);if(y)for(var t of y(r))I.call(r,t)&&b(e,t,r[t]);return e},F=(e,r)=>E(e,z(r));const N=$();var H={name:"CharrueSchemaTable",components:{MultiColumn:j},props:{data:{type:Array,required:!0},columns:{type:Array,required:!0},tableProps:Object,selection:[Boolean,Object],shouldCacheSelection:Boolean,expand:[Array,Boolean],loading:Boolean,loadingOptions:Object,expandOptions:Object,expandHeader:{type:String},expandProps:{type:Object,default(){return{}}},extraColumnProps:{type:Object,default(){return{}}},index:[Function,Boolean,Number],indexHeader:{type:String},indexProps:{type:Object,default(){return{}}},theadContent:Function,extraColumnTitle:{type:String,default:"\u64CD\u4F5C"},showExtraColumn:{type:Boolean,default:!0},pagination:[Boolean,Object],page:Number,total:[Number,String],size:Number},data(){return{version:2,events:{},prevPage:0,prevSize:0,startSelect:!1,selectionData:{},cachedSelectionData:[],prevCachedSelectionData:[]}},computed:{tableData(){return this.shouldCacheSelection?this.data.map((e,r)=>F(_({},e),{__key:(this.page-1)*this.size+r+1})):N(this.data)},computedIndex(){return this.index===!0?e=>this.size*(this.page-1)+e+1:this.index},computedTotal(){return Number(this.total)},slots(){return this.version===2?_(_({},this.$slots),this.$scopedSlots):this.$slots}},created(){this.version=this[v].version||2,this.proxyElTableMethods(),this.proxyElTableEvents(),this.prevSize=this.size,this.prevPage=this.page,this.cachedSelectionData=[],this.prevCachedSelectionData=[]},methods:{handlePaginationSizeChange(e){this.prevSize=this.size,this.cachedSelectionData=Object.values(this.selectionData).reduce((r,t)=>(r=r.concat(t),r),[]),this.$emit("size-change",e),this.setCurrentPageRowSelection()},handlePaginationCurrentChange(e){this.prevPage=this.page,this.cachedSelectionData=Object.values(this.selectionData).reduce((r,t)=>(r=r.concat(t),r),[]),this.$emit("update:page",e),this.$emit("page-change",e),this.setCurrentPageRowSelection()},onCurrentPageChange(e){this.$emit("update:page",e)},handlePaginationPrevClick(e){this.$emit("prev-click",e)},handlePaginationNextClick(e){this.$emit("next-click",e)},onSelectionChange(e){this.shouldCacheSelection&&(this.selectionData[this.page]=e),this.$emit("selection-change",e)},setCurrentPageRowSelection(){this.$nextTick(()=>{this.tableData.forEach(e=>{this.cachedSelectionData.findIndex(t=>t.__key===e.__key)!==-1&&this.$refs.elTableRef.toggleRowSelection(e,!0)})})},proxyElTableEvents(){["select","select-all","cell-mouse-enter","cell-mouse-leave","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"].forEach(r=>{this.events[r]=(...t)=>{this.$emit(r,...t)}})},proxyElTableMethods(){["clearSelection","toggleAllSelection","toggleRowExpansion","setCurrentRow","clearSort","clearFilter","doLayout","sort"].forEach(r=>{this[r]=(...t)=>{this.$refs.elTableRef[r](...t)}})}}};const V=H;var g=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"charrue-schema-table"},[e.slots.header?t("div",{staticClass:"charrue-schema-table__header"},[e._t("header")],2):e._e(),e._v(" "),t("div",{staticClass:"charrue-schema-table__body"},[t("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTableRef",attrs:{data:e.tableData,"element-loading-text":e.loadingOptions&&e.loadingOptions.text,"element-loading-spinner":e.loadingOptions&&e.loadingOptions.spinner,"element-loading-background":e.loadingOptions&&e.loadingOptions.background},on:{"selection-change":e.onSelectionChange}},"el-table",e.tableProps,!1),e.events),[e.selection?t("el-table-column",e._b({attrs:{type:"selection"}},"el-table-column",typeof e.selection=="boolean"?{}:e.selection,!1)):e._e(),e._v(" "),e.index?t("el-table-column",e._b({attrs:{type:"index",index:e.computedIndex},scopedSlots:e._u([{key:"header",fn:function(){return[e.indexHeader?t("span",[e._v(e._s(e.indexHeader))]):e._e(),e._v(" "),!e.indexHeader&&e.slots["index-header"]?e._t("index-header"):e._e()]},proxy:!0}],null,!0)},"el-table-column",e.indexProps,!1)):e._e(),e._v(" "),e.slots.expand?t("el-table-column",e._b({attrs:{type:"expand"},scopedSlots:e._u([{key:"header",fn:function(){return[e.expandHeader?t("span",[e._v(e._s(e.expandHeader))]):e._e(),e._v(" "),!e.expandHeader&&e.slots["extra-header"]?e._t("extra-header"):e._e()]},proxy:!0},{key:"default",fn:function(l){return[e._t("expand",null,{scope:l})]}}],null,!0)},"el-table-column",e.expandProps,!1)):e._e(),e._v(" "),e._l(e.columns,function(l,i){return t("el-table-column",e._b({directives:[{name:"show",rawName:"v-show",value:l.hidden!==!0,expression:"item.hidden !== true"}],key:l.prop+"-"+l.label+"-"+i,attrs:{label:l.label,prop:l.prop},scopedSlots:e._u([{key:"header",fn:function(c){return[l.children?e._l(l.children||[],function(n,a){return t("multi-column",{key:(n.prop||"")+"-"+a,attrs:{label:n.label,prop:n.prop,children:n.children}})}):e.slots.thead?[e._t("thead",null,{scope:c})]:t("span",[e._v(e._s(l.label))])]}},{key:"default",fn:function(c){return[t("div",{staticClass:"cell-wrapper"},[e.slots[l.prop]?[e._t(l.prop,null,{scope:c})]:t("span",[e._v(e._s(c.row[l.prop]))])],2)]}}],null,!0)},"el-table-column",l.attrs,!1))}),e._v(" "),e.showExtraColumn?t("el-table-column",e._b({scopedSlots:e._u([{key:"header",fn:function(){return[e.slots.extraColumnHeader?[e._t("extraColumnHeader")]:t("span",[e._v(e._s(e.extraColumnTitle))])]},proxy:!0},{key:"default",fn:function(l){return[e._t("actions",null,{scope:l})]}}],null,!0)},"el-table-column",e.extraColumnProps,!1)):e._e()],2),e._v(" "),e.pagination?t("div",{staticClass:"charrue-pagination-wrapper",class:[e.pagination.class],style:e.pagination.style},[t("el-pagination",e._b({attrs:{"current-page":e.page,total:e.computedTotal,"page-size":e.size},on:{"update:current-page":e.onCurrentPageChange,"size-change":e.handlePaginationSizeChange,"current-change":e.handlePaginationCurrentChange,"prev-click":e.handlePaginationPrevClick,"next-click":e.handlePaginationNextClick}},"el-pagination",typeof e.pagination=="boolean"?{}:e.pagination,!1))],1):e._e(),e._v(" "),e._t("footer")],2)])},q=[];g._withStripped=!0;const K=void 0,L=void 0,G=!1;function J(e,r,t,l,i,c,n,a){const o=(typeof t=="function"?t.options:t)||{};return o.__file="C:\\all\\code\\plow\\charrue-el\\packages\\schema-table-internal\\libs\\schema-table.vue",o.render||(o.render=e.render,o.staticRenderFns=e.staticRenderFns,o._compiled=!0,i&&(o.functional=!0)),o._scopeId=l,o}var Q=J({render:g,staticRenderFns:q},K,V,L,G);const m=Q,U=v;var W={install(e){e.prototype[U]={version:2},e.component(m.name,m)}};return W}();
