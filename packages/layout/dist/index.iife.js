this.CharrueLayout=function(){"use strict";var K=Object.defineProperty,k=Object.defineProperties,q=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,S=(e,r,t)=>r in e?K(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,V=(e,r)=>{for(var t in r||(r={}))Z.call(r,t)&&S(e,t,r[t]);if(R)for(var t of R(r))G.call(r,t)&&S(e,t,r[t]);return e},J=(e,r)=>k(e,q(r));function I(e){return e.replace(/\/\//g,"/")}function P(e){return typeof e=="function"}const E="$CharrueLayoutPluginOptions",Q=e=>{const r={};return e=Number(e),e===2?r.subMenu="el-submenu":e===3?r.subMenu="el-sub-menu":console.error(`[charrue layout] version ${e} is not supported`),r},X=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g;function Y(e){return X.test(e)}function A(e){const r=e.split("/").filter(t=>t);return r.map((t,n)=>`/${r.slice(0,n+1).join("/")}`)}function M(e,r=""){return e.map(t=>{let{path:n}=t;if(r=I(r),n&&!Y(n)){const i=n[0]==="/";n&&(n=r&&i?n:`${r}/${n}`)}n=I(n);const u=J(V({},t),{path:n,parentPath:r});return t.children&&(u.children=M(t.children,`${r}/${t.path}`)),u})}function ee(e){const r={},t=u=>{const i=[];return u.forEach(o=>{r[o.path]=o,o.children&&Array.isArray(o.children)&&o.children.length>0&&i.push(...o.children)}),i};let n=t(e);for(;n&&n.length>0;)n=t(n);return r}function te(e){for(var r=[],t=0;t<e.length;){var n=e[t];if(n==="*"||n==="+"||n==="?"){r.push({type:"MODIFIER",index:t,value:e[t++]});continue}if(n==="\\"){r.push({type:"ESCAPED_CHAR",index:t++,value:e[t++]});continue}if(n==="{"){r.push({type:"OPEN",index:t,value:e[t++]});continue}if(n==="}"){r.push({type:"CLOSE",index:t,value:e[t++]});continue}if(n===":"){for(var u="",i=t+1;i<e.length;){var o=e.charCodeAt(i);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){u+=e[i++];continue}break}if(!u)throw new TypeError("Missing parameter name at "+t);r.push({type:"NAME",index:t,value:u}),t=i;continue}if(n==="("){var l=1,a="",i=t+1;if(e[i]==="?")throw new TypeError('Pattern cannot start with "?" at '+i);for(;i<e.length;){if(e[i]==="\\"){a+=e[i++]+e[i++];continue}if(e[i]===")"){if(l--,l===0){i++;break}}else if(e[i]==="("&&(l++,e[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at "+i);a+=e[i++]}if(l)throw new TypeError("Unbalanced pattern at "+t);if(!a)throw new TypeError("Missing pattern at "+t);r.push({type:"PATTERN",index:t,value:a}),t=i;continue}r.push({type:"CHAR",index:t,value:e[t++]})}return r.push({type:"END",index:t,value:""}),r}function re(e,r){r===void 0&&(r={});for(var t=te(e),n=r.prefixes,u=n===void 0?"./":n,i="[^"+y(r.delimiter||"/#?")+"]+?",o=[],l=0,a=0,_="",c=function(p){if(a<t.length&&t[a].type===p)return t[a++].value},g=function(p){var w=c(p);if(w!==void 0)return w;var U=t[a],Xe=U.type,Ye=U.index;throw new TypeError("Unexpected "+Xe+" at "+Ye+", expected "+p)},v=function(){for(var p="",w;w=c("CHAR")||c("ESCAPED_CHAR");)p+=w;return p};a<t.length;){var d=c("CHAR"),b=c("NAME"),C=c("PATTERN");if(b||C){var s=d||"";u.indexOf(s)===-1&&(_+=s,s=""),_&&(o.push(_),_=""),o.push({name:b||l++,prefix:s,suffix:"",pattern:C||i,modifier:c("MODIFIER")||""});continue}var f=d||c("ESCAPED_CHAR");if(f){_+=f;continue}_&&(o.push(_),_="");var m=c("OPEN");if(m){var s=v(),x=c("NAME")||"",h=c("PATTERN")||"",$=v();g("CLOSE"),o.push({name:x||(h?l++:""),pattern:x&&!h?i:h,prefix:s,suffix:$,modifier:c("MODIFIER")||""});continue}g("END")}return o}function y(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function O(e){return e&&e.sensitive?"":"i"}function ne(e,r){if(!r)return e;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,u=t.exec(e.source);u;)r.push({name:u[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),u=t.exec(e.source);return e}function ae(e,r,t){var n=e.map(function(u){return D(u,r,t).source});return new RegExp("(?:"+n.join("|")+")",O(t))}function ie(e,r,t){return oe(re(e,t),r,t)}function oe(e,r,t){t===void 0&&(t={});for(var n=t.strict,u=n===void 0?!1:n,i=t.start,o=i===void 0?!0:i,l=t.end,a=l===void 0?!0:l,_=t.encode,c=_===void 0?function(p){return p}:_,g="["+y(t.endsWith||"")+"]|$",v="["+y(t.delimiter||"/#?")+"]",d=o?"^":"",b=0,C=e;b<C.length;b++){var s=C[b];if(typeof s=="string")d+=y(c(s));else{var f=y(c(s.prefix)),m=y(c(s.suffix));if(s.pattern)if(r&&r.push(s),f||m)if(s.modifier==="+"||s.modifier==="*"){var x=s.modifier==="*"?"?":"";d+="(?:"+f+"((?:"+s.pattern+")(?:"+m+f+"(?:"+s.pattern+"))*)"+m+")"+x}else d+="(?:"+f+"("+s.pattern+")"+m+")"+s.modifier;else d+="("+s.pattern+")"+s.modifier;else d+="(?:"+f+m+")"+s.modifier}}if(a)u||(d+=v+"?"),d+=t.endsWith?"(?="+g+")":"$";else{var h=e[e.length-1],$=typeof h=="string"?v.indexOf(h[h.length-1])>-1:h===void 0;u||(d+="(?:"+v+"(?="+g+"))?"),$||(d+="(?="+v+"|"+g+")")}return new RegExp(d,O(t))}function D(e,r,t){return e instanceof RegExp?ne(e,r):Array.isArray(e)?ae(e,r,t):ie(e,r,t)}var ue={name:"SidebarItem",props:{subMenuComponent:{type:String,default:"el-submenu"},menuItem:{type:Object,required:!0},prefixIconClass:String,menuTextClass:String,route:Boolean}};const se=ue;var T=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"charrue-layout-sidebar-el-menu-container"},[e.menuItem.children&&e.menuItem.children.length>0?t(e.subMenuComponent,{tag:"component",attrs:{index:e.menuItem.path,"popper-append-to-body":""},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"submenu-title",class:[e.menuItem.icon?"submenu-title-with-icon":""]},[t("i",{staticClass:"charrue-sidebar-menu-icon",class:[e.prefixIconClass,e.menuItem.icon]}),e._v(" "),t("span",{staticClass:"charrue-sidebar-menu-text",class:[e.menuTextClass]},[e._v(e._s(e.menuItem.title))])])]},proxy:!0}],null,!1,3709594052)},[e._v(" "),e._l(e.menuItem.children,function(n){return t("sidebar-item",{key:n.path,attrs:{route:e.route,"is-nest":!0,"menu-item":n,"sub-menu-component":e.subMenuComponent}})})],2):[e.route?t("router-link",{staticClass:"menu-router-link",attrs:{to:e.menuItem.path}},[t("el-menu-item",{attrs:{index:e.menuItem.path},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{staticClass:"charrue-sidebar-menu-text",class:[e.menuTextClass]},[e._v(e._s(e.menuItem.title))])]},proxy:!0}],null,!1,3287638056)},[t("i",{staticClass:"charrue-sidebar-menu-icon",class:[e.prefixIconClass,e.menuItem.icon]})])],1):t("el-menu-item",{attrs:{index:e.menuItem.path},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{staticClass:"charrue-sidebar-menu-text",class:[e.menuTextClass]},[e._v(e._s(e.menuItem.title))])]},proxy:!0}])},[t("i",{staticClass:"charrue-sidebar-menu-icon",class:[e.prefixIconClass,e.menuItem.icon]})])]],2)},le=[];T._withStripped=!0;const ce=void 0,de=void 0,_e=!1;function pe(e,r,t,n,u,i,o,l){const a=(typeof t=="function"?t.options:t)||{};return a.__file="C:\\all\\code\\plow\\charrue-el\\packages\\layout-internal\\libs\\SidebarItem.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,u&&(a.functional=!0)),a._scopeId=n,a}var fe=pe({render:T,staticRenderFns:le},ce,se,de,_e),he=Object.defineProperty,F=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,j=(e,r,t)=>r in e?he(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,z=(e,r)=>{for(var t in r||(r={}))ve.call(r,t)&&j(e,t,r[t]);if(F)for(var t of F(r))me.call(r,t)&&j(e,t,r[t]);return e},ye={name:"GlobalAside",components:{SidebarItem:fe},props:{data:{type:Array,default(){return[]}},collapsed:{type:Boolean,default:!1},logo:String,title:String,route:{type:Boolean,default:!0},absolute:{type:Boolean,default:!1},authorized:Function,sidebarWidth:{type:Array,default(){return[54,200]}},regexToPath:{type:Object},homeUrl:{type:String,default:"/"},subMenuComponent:{type:String}},data(){return{openKeys:[],activeRoutePath:"",menuData:[],menuDataPathMapping:{}}},computed:{width(){return this.collapsed?`${this.sidebarWidth[0]}px`:`${this.sidebarWidth[1]}px`},computedMenuData(){const e=[];return this.menuData.forEach((r,t)=>{const n=this.formatMenuData({menu:r,index:t,deep:0,path:r.path,parent:null});n&&e.push(n)}),e}},watch:{data:{handler(){this.filterAsideMenuData()},immediate:!0,deep:!0}},created(){this.route&&this.$watch("$route.path",e=>{const r=this.regexToPath?Object.keys(this.regexToPath).find(u=>D(u).test(e)):null;r?this.activeRoutePath=this.regexToPath[r]:this.activeRoutePath=e;const t=A(this.activeRoutePath),n=this.menuDataPathMapping[this.activeRoutePath];n&&n.parentPath&&A(n.parentPath).forEach(u=>{t.includes(u)||t.push(u)}),this.openKeys=t},{immediate:!0})},methods:{filterAsideMenuData(){const e=this.data.filter(r=>r.title&&!r.hide).map(r=>(this.authorized&&this.authorized(r.authority,r),r)).filter(r=>!!r);this.menuData=M(e),this.menuDataPathMapping=ee(this.menuData)},_formatMenuData({menu:e,deep:r,index:t,path:n,parent:u}={}){const i=e?z({},e):{};return this.authorized?P(this.authorized)&&!this.authorized({menu:i,deep:r,index:t,path:n,parent:u})?!1:(i.children=i.children||[],Array.isArray(i.children)&&i.children.length>0&&(i.children=i.children.map(o=>{const l=n.startsWith("/")?o.path:`${n}/${o.path}`;return this._formatMenuData({menu:o,deep:r+1,index:t,path:l,parent:i})}).filter(o=>o)),i):i},formatMenuData({menu:e,deep:r,index:t,path:n,parent:u}={}){const i=e?z({},e):{};return this.authorized?P(this.authorized)&&!this.authorized({menu:i,deep:r,index:t,path:n,parent:u})?!1:(i.children=i.children||[],Array.isArray(i.children)&&i.children.length>0&&(i.children=i.children.map(o=>{const l=n.startsWith("/")?o.path:`${n}/${o.path}`;return this.formatMenuData({menu:o,deep:r+1,index:t,path:l,parent:i})}).filter(o=>o)),i):i}}};const ge=ye;var W=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"charrue-layout-sidebar-container"},[t("div",{staticClass:"charrue-layout-sidebar-placeholder",style:{width:e.width}}),e._v(" "),t("div",{staticClass:"charrue-layout-sidebar charrue-layout-sidebar-el-menu-container",style:{width:e.width,position:e.absolute?"absolute":"fixed"}},[e.logo||e.title?t("div",{staticClass:"logo-container"},[t("router-link",{staticClass:"menu-router-link",attrs:{to:e.homeUrl}},[e.logo?t("img",{attrs:{src:e.logo,alt:"logo"}}):e._e(),e._v(" "),e.title?t("h1",[e._v(e._s(e.title))]):e._e()])],1):e._e(),e._v(" "),e._t("sidebar-top"),e._v(" "),t("el-menu",{staticClass:"charrue-layout-sidebar-el-menu",attrs:{mode:"vertical","unique-opened":"",collapse:e.collapsed,"default-active":e.activeRoutePath,"default-openeds":e.openKeys}},e._l(e.computedMenuData,function(n){return t("sidebar-item",{key:n.path,attrs:{route:e.route,"sub-menu-component":e.subMenuComponent,"menu-item":n}})}),1),e._v(" "),e._t("sidebar-bottom")],2)])},be=[];W._withStripped=!0;const Ce=void 0,we=void 0,xe=!1;function $e(e,r,t,n,u,i,o,l){const a=(typeof t=="function"?t.options:t)||{};return a.__file="C:\\all\\code\\plow\\charrue-el\\packages\\layout-internal\\libs\\LayoutSidebar.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,u&&(a.functional=!0)),a._scopeId=n,a}var Re=$e({render:W,staticRenderFns:be},Ce,ge,we,xe),Se={name:"LayoutContent",props:{animation:{type:Boolean,default:!0}}};const Ie=Se;var H=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("section",{staticClass:"charrue-layout-content-container"},[t("div",{staticClass:"charrue-layout-content-header"},[e._t("content-header")],2),e._v(" "),t("div",{staticClass:"charrue-layout-content-main"},[e.animation?[t("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[e._t("content")],2)]:[e._t("content")]],2),e._v(" "),t("div",{staticClass:"charrue-layout-content-footer"},[e._t("content-footer")],2)])},Pe=[];H._withStripped=!0;const Ee=void 0,Ae=void 0,Me=!1;function Oe(e,r,t,n,u,i,o,l){const a=(typeof t=="function"?t.options:t)||{};return a.__file="C:\\all\\code\\plow\\charrue-el\\packages\\layout-internal\\libs\\LayoutContent.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,u&&(a.functional=!0)),a._scopeId=n,a}var De=Oe({render:H,staticRenderFns:Pe},Ee,Ie,Ae,Me),Te={name:"HamburgerTrigger",props:{isActive:{type:Boolean,default:!1}},emits:["toggle-click"],methods:{toggleClick(){this.$emit("toggle-click",this.isActive)}}};const Fe=Te;var L=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"hamburger-container",on:{click:e.toggleClick}},[t("svg",{staticClass:"hamburger-svg",class:{"is-active":e.isActive},attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"}},[t("path",{attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"}})])])},je=[];L._withStripped=!0;const ze=void 0,We=void 0,He=!1;function Le(e,r,t,n,u,i,o,l){const a=(typeof t=="function"?t.options:t)||{};return a.__file="C:\\all\\code\\plow\\charrue-el\\packages\\layout-internal\\libs\\Hamburger.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,u&&(a.functional=!0)),a._scopeId=n,a}var Be=Le({render:L,staticRenderFns:je},ze,Fe,We,He),Ne={name:"CharrueLayout",components:{LayoutSidebar:Re,LayoutContent:De,Hamburger:Be},props:{collapsed:{type:Boolean,default:!1},fixedHeader:{type:Boolean,default:!0},data:{type:Array,required:!0,default(){return[]}},logo:String,title:String,sidebarWidth:{type:Array,default(){return[54,200]}},animation:{type:Boolean,default:!0},absolute:{type:Boolean,default:!1},route:{type:Boolean,default:!0},authorized:Function,homeUrl:{type:String,default:"/"},regexToPath:{type:Object}},emits:["update:collapsed"],data(){return{version:2,innerCollapse:!1}},computed:{componentConfig(){return Q(this.version||2)},mainWidthStyle(){return{width:`calc(100% - ${this.collapsed?this.sidebarWidth[0]:this.sidebarWidth[1]}px)`}},headerWidthStyle(){let e="100%";return this.fixedHeader&&(e=`calc(100% - ${this.collapsed?this.sidebarWidth[0]:this.sidebarWidth[1]}px)`),{width:e}}},watch:{collapsed:{handler(e){this.innerCollapse=e},immediate:!0},innerCollapse(e){this.$emit("update:collapsed",e)}},created(){this.version=this[E].version,console.log(this)},methods:{toggleSideBar(){this.innerCollapse=!this.innerCollapse}}};const Ue=Ne;var B=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"charrue-layout",class:[e.collapsed?"hideSidebar":"openSidebar"]},[t("layout-sidebar",{attrs:{collapsed:e.innerCollapse,data:e.data,logo:e.logo,title:e.title,route:e.route,absolute:e.absolute,authorized:e.authorized,"sidebar-width":e.sidebarWidth,"home-url":e.homeUrl,"sub-menu-component":e.componentConfig.subMenu,"regex-to-path":e.regexToPath},scopedSlots:e._u([{key:"sidebar-top",fn:function(){return[e._t("sidebar-top")]},proxy:!0},{key:"sidebar-bottom",fn:function(){return[e._t("sidebar-bottom")]},proxy:!0}],null,!0)}),e._v(" "),t("div",{staticClass:"charrue-layout-main",style:e.mainWidthStyle},[t("div",{staticClass:"charrue-layout-header-container",class:{"fixed-header":e.fixedHeader},style:e.headerWidthStyle},[t("div",{staticClass:"charrue-layout-header-main"},[t("div",{staticClass:"charrue-layout-header-left"},[e._t("header-left",function(){return[t("hamburger",{on:{"toggle-click":e.toggleSideBar}})]})],2),e._v(" "),t("div",{staticClass:"charrue-layout-header-right"},[e._t("header-right")],2)])]),e._v(" "),t("layout-content",{attrs:{animation:e.animation},scopedSlots:e._u([{key:"content-header",fn:function(){return[e._t("content-header")]},proxy:!0},{key:"content",fn:function(){return[e._t("default")]},proxy:!0},{key:"content-footer",fn:function(){return[e._t("content-footer")]},proxy:!0}],null,!0)})],1)],1)},Ke=[];B._withStripped=!0;const ke=void 0,qe=void 0,Ze=!1;function Ge(e,r,t,n,u,i,o,l){const a=(typeof t=="function"?t.options:t)||{};return a.__file="C:\\all\\code\\plow\\charrue-el\\packages\\layout-internal\\libs\\Layout.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,u&&(a.functional=!0)),a._scopeId=n,a}var Ve=Ge({render:B,staticRenderFns:Ke},ke,Ue,qe,Ze);const N=Ve,Je=E;var Qe={install(e){e.prototype[Je]={version:2},e.component(N.name,N)}};return Qe}();
