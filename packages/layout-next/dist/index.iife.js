this.CharrueLayoutNext=function(e){"use strict";var M=Object.defineProperty,N=Object.defineProperties,I=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,g=(n,r,t)=>r in n?M(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,b=(n,r)=>{for(var t in r||(r={}))D.call(r,t)&&g(n,t,r[t]);if(_)for(var t of _(r))V.call(r,t)&&g(n,t,r[t]);return n},$=(n,r)=>N(n,I(r));const C="$CharrueLayoutPluginOptions",O=n=>{const r={};return n==2?r.subMenu="el-submenu":n==3?r.subMenu="el-sub-menu":console.error(`[charrue layout] version ${n} is not supported`),r},A=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g;function L(n){return A.test(n)}function W(n){const r=n.split("/").filter(t=>t);return r.map((t,a)=>`/${r.slice(0,a+1).join("/")}`)}function k(n,r=""){return n.map(t=>{let{path:a,redirect:i}=t;if(a&&!L(a)){const l=a[0]==="/";a&&(a=r&&l?a:`${r}/${a}`)}a=B(a),i&&i[0]!=="/"&&(i=B(`${a}/${i}`));const o=$(b({},t),{path:a,redirect:i});return t.children&&(o.children=k(t.children,`${r}/${t.path}`)),o})}function w(n,r={}){if(!Array.isArray(n))return r;let t=b({},r);return n.forEach(a=>{a.path&&(t[a.path]=a),a.children&&(t=w(a.children,t))}),t}function B(n){return n.replace(/\/\//g,"/")}function S(n){return typeof n=="function"}var m={name:"SidebarItem",props:{subMenuComponent:{type:String,default:"el-submenu"},menuItem:{type:Object,required:!0},prefixIconClass:String,menuTextClass:String,route:Boolean}};const H={class:"charrue-layout-sidebar-el-menu-container"};function j(n,r,t,a,i,o){const l=e.resolveComponent("sidebar-item",!0),s=e.resolveComponent("el-menu-item"),d=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",H,[t.menuItem.children&&t.menuItem.children.length>0?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.subMenuComponent),{key:0,index:t.menuItem.path,"popper-append-to-body":""},{title:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(["submenu-title",t.menuItem.icon?"submenu-title-with-icon":""])},[e.createElementVNode("i",{class:e.normalizeClass(["sidebar-menu-icon",t.prefixIconClass,t.menuItem.icon])},null,2),e.createElementVNode("span",{class:e.normalizeClass([t.menuTextClass,"common-menu-text"])},e.toDisplayString(t.menuItem.title),3)],2)]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.menuItem.children,c=>(e.openBlock(),e.createBlock(l,{key:c.path,route:t.route,"is-nest":!0,menuItem:c,subMenuComponent:t.subMenuComponent},null,8,["route","menuItem","subMenuComponent"]))),128))]),_:1},8,["index"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[t.route?(e.openBlock(),e.createBlock(d,{key:0,to:t.menuItem.path,class:"menu-router-link"},{default:e.withCtx(()=>[e.createVNode(s,{index:t.menuItem.path},{title:e.withCtx(()=>[e.createElementVNode("span",{class:e.normalizeClass([t.menuTextClass,"common-menu-text"])},e.toDisplayString(t.menuItem.title),3)]),default:e.withCtx(()=>[e.createElementVNode("i",{class:e.normalizeClass(["sidebar-menu-icon",t.prefixIconClass,t.menuItem.icon])},null,2)]),_:1},8,["index"])]),_:1},8,["to"])):(e.openBlock(),e.createBlock(s,{key:1,index:t.menuItem.path},{title:e.withCtx(()=>[e.createElementVNode("span",{class:e.normalizeClass([t.menuTextClass,"common-menu-text"])},e.toDisplayString(t.menuItem.title),3)]),default:e.withCtx(()=>[e.createElementVNode("i",{class:e.normalizeClass(["sidebar-menu-icon",t.prefixIconClass,t.menuItem.icon])},null,2)]),_:1},8,["index"]))],2112))])}m.render=j,m.__file="layout-internal/libs/SidebarItem.vue";var F=Object.defineProperty,x=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,E=(n,r,t)=>r in n?F(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,z=(n,r)=>{for(var t in r||(r={}))T.call(r,t)&&E(n,t,r[t]);if(x)for(var t of x(r))U.call(r,t)&&E(n,t,r[t]);return n},u={name:"GlobalAside",components:{SidebarItem:m},props:{data:{type:Array,default(){return[]}},collapsed:{type:Boolean,default:!1},logo:String,title:String,route:{type:Boolean,default:!0},absolute:{type:Boolean,default:!1},authorized:Function,checkMenuDisabled:Function,sidebarWidth:{type:Array,default(){return[54,200]}},homeUrl:{type:String,default:"/"},subMenuComponent:{type:String}},data(){return{openKeys:[],activeRoutePath:"",menuData:[],menuDataPathMapping:{}}},computed:{width(){return this.collapsed?this.sidebarWidth[0]+"px":this.sidebarWidth[1]+"px"},computedMenuData(){const n=[];return this.menuData.forEach((r,t)=>{const a=this.formatMenuData({menu:r,index:t,deep:0,path:r.path,parent:null});a&&n.push(a)}),n}},watch:{data:{handler(){this.filterAsideMenuData()},immediate:!0,deep:!0}},methods:{filterAsideMenuData(){const n=this.data.filter(r=>r.title&&!r.hide).map(r=>(this.authorized&&this.authorized(r.authority,r),r)).filter(r=>!!r);this.menuData=k(n),this.menuDataPathMapping=w(this.menuData)},_formatMenuData({menu:n,deep:r,index:t,path:a,parent:i}={}){let o=n?z({},n):{};return this.authorized?S(this.authorized)&&!this.authorized({menu:o,deep:r,index:t,path:a,parent:i})?!1:(o.children=o.children||[],Array.isArray(o.children)&&o.children.length>0&&(o.children=o.children.map(l=>{const s=a.startsWith("/")?l.path:`${a}/${l.path}`;return this._formatMenuData({menu:l,deep:r+1,index:t,path:s,parent:o})}).filter(l=>l)),o):o},formatMenuData({menu:n,deep:r,index:t,path:a,parent:i}={}){let o=n?z({},n):{};return this.authorized?S(this.authorized)&&!this.authorized({menu:o,deep:r,index:t,path:a,parent:i})?!1:(o.children=o.children||[],Array.isArray(o.children)&&o.children.length>0&&(o.children=o.children.map(l=>{const s=a.startsWith("/")?l.path:`${a}/${l.path}`;return this.formatMenuData({menu:l,deep:r+1,index:t,path:s,parent:o})}).filter(l=>l)),o):o}},created(){this.route&&this.$watch("$route.path",n=>{this.menuDataPathMapping[n]&&this.menuDataPathMapping[n].redirect?this.activeRoutePath=this.menuDataPathMapping[n].redirect:this.activeRoutePath=n,this.openKeys=W(n)},{immediate:!0})}};const R={class:"charrue-layout-sidebar-container"},K={key:0,class:"logo-container"},q=["src"],Z={key:1};function G(n,r,t,a,i,o){const l=e.resolveComponent("router-link"),s=e.resolveComponent("sidebar-item"),d=e.resolveComponent("el-menu");return e.openBlock(),e.createElementBlock("div",R,[e.createElementVNode("div",{class:"charrue-layout-sidebar-placeholder",style:e.normalizeStyle({width:o.width})},null,4),e.createElementVNode("div",{class:"charrue-layout-sidebar charrue-layout-sidebar-el-menu-container",style:e.normalizeStyle({width:o.width,position:t.absolute?"absolute":"fixed"})},[t.logo||t.title?(e.openBlock(),e.createElementBlock("div",K,[e.createVNode(l,{to:t.homeUrl,class:e.normalizeClass(["menu-router-link"])},{default:e.withCtx(()=>[t.logo?(e.openBlock(),e.createElementBlock("img",{key:0,src:t.logo,alt:"logo"},null,8,q)):e.createCommentVNode("v-if",!0),t.title?(e.openBlock(),e.createElementBlock("h1",Z,e.toDisplayString(t.title),1)):e.createCommentVNode("v-if",!0)]),_:1},8,["to"])])):e.createCommentVNode("v-if",!0),e.renderSlot(n.$slots,"sidebar-top"),e.createVNode(d,{class:"charrue-layout-sidebar-el-menu",mode:"vertical","unique-opened":"",collapse:t.collapsed,"default-active":i.activeRoutePath,"default-openeds":i.openKeys},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.computedMenuData,c=>(e.openBlock(),e.createBlock(s,{route:t.route,key:c.path,subMenuComponent:t.subMenuComponent,menuItem:c},null,8,["route","subMenuComponent","menuItem"]))),128))]),_:1},8,["collapse","default-active","default-openeds"]),e.renderSlot(n.$slots,"sidebar-bottom")],4)])}u.render=G,u.__file="layout-internal/libs/LayoutSidebar.vue";var h={name:"Hamburger",props:{isActive:{type:Boolean,default:!1}},emits:["toggle-click"],methods:{toggleClick(){this.$emit("toggle-click",this.isActive)}}};const J=[e.createElementVNode("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1)];function Q(n,r,t,a,i,o){return e.openBlock(),e.createElementBlock("div",{class:"hamburger-container",onClick:r[0]||(r[0]=(...l)=>o.toggleClick&&o.toggleClick(...l))},[(e.openBlock(),e.createElementBlock("svg",{class:e.normalizeClass([{"is-active":t.isActive},"hamburger-svg"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},J,2))])}h.render=Q,h.__file="layout-internal/libs/Hamburger.vue";var p={name:"LayoutHeader",components:{Hamburger:h},props:{collapse:{type:Boolean,default:!1},fixed:{type:Boolean,default:!0}},emits:["update:collapse"],methods:{toggleSideBar(){this.$emit("update:collapse",!this.collapse)}}};const X={class:"charrue-layout-header-main"},Y={class:"charrue-layout-header-left"},v={class:"charrue-layout-header-right"};function ee(n,r,t,a,i,o){const l=e.resolveComponent("hamburger");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["charrue-layout-header-container",{"fixed-header":t.fixed}])},[e.createElementVNode("div",X,[e.createElementVNode("div",Y,[e.renderSlot(n.$slots,"header-trigger",{},()=>[e.createVNode(l,{onToggleClick:o.toggleSideBar},null,8,["onToggleClick"])]),e.renderSlot(n.$slots,"header-left")]),e.createElementVNode("div",v,[e.renderSlot(n.$slots,"header-right")])])],2)}p.render=ee,p.__file="layout-internal/libs/LayoutHeader.vue";var f={name:"LayoutContent",props:{animation:{type:Boolean,default:!0}}};const te={class:"charrue-layout-content-container"},ne={class:"charrue-layout-content-header"},re={class:"charrue-layout-content-main"},oe={class:"charrue-layout-content-footer"};function ae(n,r,t,a,i,o){return e.openBlock(),e.createElementBlock("section",te,[e.createElementVNode("div",ne,[e.renderSlot(n.$slots,"content-header")]),e.createElementVNode("div",re,[t.animation?(e.openBlock(),e.createBlock(e.Transition,{key:0,name:"fade-transform",mode:"out-in"},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"content")]),_:3})):e.renderSlot(n.$slots,"content",{key:1})]),e.createElementVNode("div",oe,[e.renderSlot(n.$slots,"content-footer")])])}f.render=ae,f.__file="layout-internal/libs/LayoutContent.vue";var y={name:"Layout",components:{LayoutSidebar:u,LayoutHeader:p,LayoutContent:f},props:{version:{type:Number,validator(n){return[2,3].indexOf(n)>-1},default:2},collapsed:{type:Boolean,default:!1},fixedHeader:{type:Boolean,default:!0},data:{type:Array,required:!0,default(){return[]}},logo:String,title:String,sidebarWidth:{type:Array,default(){return[54,200]}},animation:{type:Boolean,default:!0},absolute:{type:Boolean,default:!1},route:{type:Boolean,default:!0},authorized:Function,homeUrl:{type:String,default:"/"}},data(){return{innerCollapse:!1,componentConfig:{}}},computed:{mainWidthStyle(){return{width:`calc(100% - ${this.collapsed?this.sidebarWidth[0]:this.sidebarWidth[1]}px)`}},headerWidthStyle(){let n="100%";return this.fixedHeader&&(n=`calc(100% - ${this.collapsed?this.sidebarWidth[0]:this.sidebarWidth[1]}px)`),{width:n}}},watch:{collapsed:{handler(n){this.innerCollapse=n},immediate:!0},innerCollapse(n){this.$emit("update:collapsed",n)}},created(){this.componentConfig=O(this[C].version||2)},emits:["update:collapsed"]};function le(n,r,t,a,i,o){const l=e.resolveComponent("layout-sidebar"),s=e.resolveComponent("layout-header"),d=e.resolveComponent("layout-content");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["charrue-layout",[t.collapsed?"hideSidebar":"openSidebar"]])},[e.createVNode(l,{collapsed:i.innerCollapse,data:t.data,logo:t.logo,title:t.title,route:t.route,absolute:t.absolute,authorized:t.authorized,sidebarWidth:t.sidebarWidth,homeUrl:t.homeUrl,subMenuComponent:i.componentConfig.subMenu},{"sidebar-top":e.withCtx(()=>[e.renderSlot(n.$slots,"sidebar-top")]),"sidebar-bottom":e.withCtx(()=>[e.renderSlot(n.$slots,"sidebar-bottom")]),_:3},8,["collapsed","data","logo","title","route","absolute","authorized","sidebarWidth","homeUrl","subMenuComponent"]),e.createElementVNode("div",{class:"charrue-layout-main",style:e.normalizeStyle(o.mainWidthStyle)},[e.createVNode(s,{collapse:i.innerCollapse,fixed:t.fixedHeader,style:e.normalizeStyle(o.headerWidthStyle),"onUpdate:collapse":r[0]||(r[0]=c=>i.innerCollapse=c)},{"header-trigger":e.withCtx(()=>[e.renderSlot(n.$slots,"header-trigger")]),"header-left":e.withCtx(()=>[e.renderSlot(n.$slots,"header-left")]),"header-right":e.withCtx(()=>[e.renderSlot(n.$slots,"header-right")]),_:3},8,["collapse","fixed","style"]),e.createVNode(d,{animation:t.animation},{"content-header":e.withCtx(()=>[e.renderSlot(n.$slots,"content-header")]),content:e.withCtx(()=>[e.renderSlot(n.$slots,"default")]),"content-footer":e.withCtx(()=>[e.renderSlot(n.$slots,"content-footer")]),_:3},8,["animation"])],4)],2)}y.render=le,y.__file="layout-internal/libs/Layout.vue";const P=y,ie=C;var se={install(n){n.config.globalProperties[ie]={version:2},n.component(P.name,P)}};return se}(vue);
