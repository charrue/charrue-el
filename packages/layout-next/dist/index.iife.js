this.CharrueLayoutNext=function(t){"use strict";var U=Object.defineProperty,K=Object.defineProperties,q=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,z=(r,n,e)=>n in r?U(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,J=(r,n)=>{for(var e in n||(n={}))Z.call(n,e)&&z(r,e,n[e]);if(M)for(var e of M(n))G.call(n,e)&&z(r,e,n[e]);return r},Q=(r,n)=>K(r,q(n));function O(r){return r.replace(/\/\//g,"/")}function I(r){return typeof r=="function"}const R="$CharrueLayoutPluginOptions",X=r=>{const n={};return r=Number(r),r===2?n.subMenu="el-submenu":r===3?n.subMenu="el-sub-menu":console.error(`[charrue layout] version ${r} is not supported`),n},Y=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g;function ee(r){return Y.test(r)}function T(r){const n=r.split("/").filter(e=>e);return n.map((e,i)=>`/${n.slice(0,i+1).join("/")}`)}function V(r,n=""){return r.map(e=>{let{path:i}=e;if(n=O(n),i&&!ee(i)){const a=i[0]==="/";i&&(i=n&&a?i:`${n}/${i}`)}i=O(i);const l=Q(J({},e),{path:i,parentPath:n});return e.children&&(l.children=V(e.children,`${n}/${e.path}`)),l})}function te(r){const n={},e=l=>{const a=[];return l.forEach(o=>{n[o.path]=o,o.children&&Array.isArray(o.children)&&o.children.length>0&&a.push(...o.children)}),a};let i=e(r);for(;i&&i.length>0;)i=e(i);return n}function re(r){for(var n=[],e=0;e<r.length;){var i=r[e];if(i==="*"||i==="+"||i==="?"){n.push({type:"MODIFIER",index:e,value:r[e++]});continue}if(i==="\\"){n.push({type:"ESCAPED_CHAR",index:e++,value:r[e++]});continue}if(i==="{"){n.push({type:"OPEN",index:e,value:r[e++]});continue}if(i==="}"){n.push({type:"CLOSE",index:e,value:r[e++]});continue}if(i===":"){for(var l="",a=e+1;a<r.length;){var o=r.charCodeAt(a);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){l+=r[a++];continue}break}if(!l)throw new TypeError("Missing parameter name at "+e);n.push({type:"NAME",index:e,value:l}),e=a;continue}if(i==="("){var c=1,d="",a=e+1;if(r[a]==="?")throw new TypeError('Pattern cannot start with "?" at '+a);for(;a<r.length;){if(r[a]==="\\"){d+=r[a++]+r[a++];continue}if(r[a]===")"){if(c--,c===0){a++;break}}else if(r[a]==="("&&(c++,r[a+1]!=="?"))throw new TypeError("Capturing groups are not allowed at "+a);d+=r[a++]}if(c)throw new TypeError("Unbalanced pattern at "+e);if(!d)throw new TypeError("Missing pattern at "+e);n.push({type:"PATTERN",index:e,value:d}),e=a;continue}n.push({type:"CHAR",index:e,value:r[e++]})}return n.push({type:"END",index:e,value:""}),n}function ne(r,n){n===void 0&&(n={});for(var e=re(r),i=n.prefixes,l=i===void 0?"./":i,a="[^"+b(n.delimiter||"/#?")+"]+?",o=[],c=0,d=0,u="",h=function(f){if(d<e.length&&e[d].type===f)return e[d++].value},C=function(f){var E=h(f);if(E!==void 0)return E;var F=e[d],Me=F.type,ze=F.index;throw new TypeError("Unexpected "+Me+" at "+ze+", expected "+f)},g=function(){for(var f="",E;E=h("CHAR")||h("ESCAPED_CHAR");)f+=E;return f};d<e.length;){var m=h("CHAR"),w=h("NAME"),x=h("PATTERN");if(w||x){var s=m||"";l.indexOf(s)===-1&&(u+=s,s=""),u&&(o.push(u),u=""),o.push({name:w||c++,prefix:s,suffix:"",pattern:x||a,modifier:h("MODIFIER")||""});continue}var p=m||h("ESCAPED_CHAR");if(p){u+=p;continue}u&&(o.push(u),u="");var _=h("OPEN");if(_){var s=g(),S=h("NAME")||"",y=h("PATTERN")||"",D=g();C("CLOSE"),o.push({name:S||(y?c++:""),pattern:S&&!y?a:y,prefix:s,suffix:D,modifier:h("MODIFIER")||""});continue}C("END")}return o}function b(r){return r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function v(r){return r&&r.sensitive?"":"i"}function ae(r,n){if(!n)return r;for(var e=/\((?:\?<(.*?)>)?(?!\?)/g,i=0,l=e.exec(r.source);l;)n.push({name:l[1]||i++,prefix:"",suffix:"",modifier:"",pattern:""}),l=e.exec(r.source);return r}function ie(r,n,e){var i=r.map(function(l){return $(l,n,e).source});return new RegExp("(?:"+i.join("|")+")",v(e))}function oe(r,n,e){return le(ne(r,e),n,e)}function le(r,n,e){e===void 0&&(e={});for(var i=e.strict,l=i===void 0?!1:i,a=e.start,o=a===void 0?!0:a,c=e.end,d=c===void 0?!0:c,u=e.encode,h=u===void 0?function(f){return f}:u,C="["+b(e.endsWith||"")+"]|$",g="["+b(e.delimiter||"/#?")+"]",m=o?"^":"",w=0,x=r;w<x.length;w++){var s=x[w];if(typeof s=="string")m+=b(h(s));else{var p=b(h(s.prefix)),_=b(h(s.suffix));if(s.pattern)if(n&&n.push(s),p||_)if(s.modifier==="+"||s.modifier==="*"){var S=s.modifier==="*"?"?":"";m+="(?:"+p+"((?:"+s.pattern+")(?:"+_+p+"(?:"+s.pattern+"))*)"+_+")"+S}else m+="(?:"+p+"("+s.pattern+")"+_+")"+s.modifier;else m+="("+s.pattern+")"+s.modifier;else m+="(?:"+p+_+")"+s.modifier}}if(d)l||(m+=g+"?"),m+=e.endsWith?"(?="+C+")":"$";else{var y=r[r.length-1],D=typeof y=="string"?g.indexOf(y[y.length-1])>-1:y===void 0;l||(m+="(?:"+g+"(?="+C+"))?"),D||(m+="(?="+g+"|"+C+")")}return new RegExp(m,v(e))}function $(r,n,e){return r instanceof RegExp?ae(r,n):Array.isArray(r)?ie(r,n,e):oe(r,n,e)}var B={name:"SidebarItem",props:{subMenuComponent:{type:String,default:"el-submenu"},menuItem:{type:Object,required:!0},prefixIconClass:String,menuTextClass:String,route:Boolean}};const se={class:"charrue-layout-sidebar-el-menu-container"};function ce(r,n,e,i,l,a){const o=t.resolveComponent("sidebar-item",!0),c=t.resolveComponent("el-menu-item"),d=t.resolveComponent("router-link");return t.openBlock(),t.createElementBlock("div",se,[e.menuItem.children&&e.menuItem.children.length>0?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.subMenuComponent),{key:0,index:e.menuItem.path,"popper-append-to-body":""},{title:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(["submenu-title",[e.menuItem.icon?"submenu-title-with-icon":""]])},[t.createElementVNode("i",{class:t.normalizeClass(["charrue-sidebar-menu-icon",[e.prefixIconClass,e.menuItem.icon]])},null,2),t.createElementVNode("span",{class:t.normalizeClass(["charrue-sidebar-menu-text",[e.menuTextClass]])},t.toDisplayString(e.menuItem.title),3)],2)]),default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.menuItem.children,u=>(t.openBlock(),t.createBlock(o,{key:u.path,route:e.route,"is-nest":!0,"menu-item":u,"sub-menu-component":e.subMenuComponent},null,8,["route","menu-item","sub-menu-component"]))),128))]),_:1},8,["index"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[e.route?(t.openBlock(),t.createBlock(d,{key:0,to:e.menuItem.path,class:"menu-router-link"},{default:t.withCtx(()=>[t.createVNode(c,{index:e.menuItem.path},{title:t.withCtx(()=>[t.createElementVNode("span",{class:t.normalizeClass(["charrue-sidebar-menu-text",[e.menuTextClass]])},t.toDisplayString(e.menuItem.title),3)]),default:t.withCtx(()=>[t.createElementVNode("i",{class:t.normalizeClass(["charrue-sidebar-menu-icon",[e.prefixIconClass,e.menuItem.icon]])},null,2)]),_:1},8,["index"])]),_:1},8,["to"])):(t.openBlock(),t.createBlock(c,{key:1,index:e.menuItem.path},{title:t.withCtx(()=>[t.createElementVNode("span",{class:t.normalizeClass(["charrue-sidebar-menu-text",[e.menuTextClass]])},t.toDisplayString(e.menuItem.title),3)]),default:t.withCtx(()=>[t.createElementVNode("i",{class:t.normalizeClass(["charrue-sidebar-menu-icon",[e.prefixIconClass,e.menuItem.icon]])},null,2)]),_:1},8,["index"]))],2112))])}B.render=ce,B.__file="layout-internal/libs/SidebarItem.vue";var de=Object.defineProperty,L=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,W=(r,n,e)=>n in r?de(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,H=(r,n)=>{for(var e in n||(n={}))ue.call(n,e)&&W(r,e,n[e]);if(L)for(var e of L(n))he.call(n,e)&&W(r,e,n[e]);return r},P={name:"GlobalAside",components:{SidebarItem:B},props:{data:{type:Array,default(){return[]}},collapsed:{type:Boolean,default:!1},logo:String,title:String,route:{type:Boolean,default:!0},absolute:{type:Boolean,default:!1},authorized:Function,sidebarWidth:{type:Array,default(){return[54,200]}},regexToPath:{type:Object},homeUrl:{type:String,default:"/"},subMenuComponent:{type:String}},data(){return{openKeys:[],activeRoutePath:"",menuData:[],menuDataPathMapping:{}}},computed:{width(){return this.collapsed?`${this.sidebarWidth[0]}px`:`${this.sidebarWidth[1]}px`},computedMenuData(){const r=[];return this.menuData.forEach((n,e)=>{const i=this.formatMenuData({menu:n,index:e,deep:0,path:n.path,parent:null});i&&r.push(i)}),r}},watch:{data:{handler(){this.filterAsideMenuData()},immediate:!0,deep:!0}},created(){this.route&&this.$watch("$route.path",r=>{const n=this.regexToPath?Object.keys(this.regexToPath).find(l=>$(l).test(r)):null;n?this.activeRoutePath=this.regexToPath[n]:this.activeRoutePath=r;const e=T(this.activeRoutePath),i=this.menuDataPathMapping[this.activeRoutePath];i&&i.parentPath&&T(i.parentPath).forEach(l=>{e.includes(l)||e.push(l)}),this.openKeys=e},{immediate:!0})},methods:{filterAsideMenuData(){const r=this.data.filter(n=>n.title&&!n.hide).map(n=>(this.authorized&&this.authorized(n.authority,n),n)).filter(n=>!!n);this.menuData=V(r),this.menuDataPathMapping=te(this.menuData)},_formatMenuData({menu:r,deep:n,index:e,path:i,parent:l}={}){const a=r?H({},r):{};return this.authorized?I(this.authorized)&&!this.authorized({menu:a,deep:n,index:e,path:i,parent:l})?!1:(a.children=a.children||[],Array.isArray(a.children)&&a.children.length>0&&(a.children=a.children.map(o=>{const c=i.startsWith("/")?o.path:`${i}/${o.path}`;return this._formatMenuData({menu:o,deep:n+1,index:e,path:c,parent:a})}).filter(o=>o)),a):a},formatMenuData({menu:r,deep:n,index:e,path:i,parent:l}={}){const a=r?H({},r):{};return this.authorized?I(this.authorized)&&!this.authorized({menu:a,deep:n,index:e,path:i,parent:l})?!1:(a.children=a.children||[],Array.isArray(a.children)&&a.children.length>0&&(a.children=a.children.map(o=>{const c=i.startsWith("/")?o.path:`${i}/${o.path}`;return this.formatMenuData({menu:o,deep:n+1,index:e,path:c,parent:a})}).filter(o=>o)),a):a}}};const me={class:"charrue-layout-sidebar-container"},fe={key:0,class:"logo-container"},pe=["src"],ye={key:1};function ge(r,n,e,i,l,a){const o=t.resolveComponent("router-link"),c=t.resolveComponent("sidebar-item"),d=t.resolveComponent("el-menu");return t.openBlock(),t.createElementBlock("div",me,[t.createElementVNode("div",{class:"charrue-layout-sidebar-placeholder",style:t.normalizeStyle({width:a.width})},null,4),t.createElementVNode("div",{class:"charrue-layout-sidebar charrue-layout-sidebar-el-menu-container",style:t.normalizeStyle({width:a.width,position:e.absolute?"absolute":"fixed"})},[e.logo||e.title?(t.openBlock(),t.createElementBlock("div",fe,[t.createVNode(o,{to:e.homeUrl,class:"menu-router-link"},{default:t.withCtx(()=>[e.logo?(t.openBlock(),t.createElementBlock("img",{key:0,src:e.logo,alt:"logo"},null,8,pe)):t.createCommentVNode("v-if",!0),e.title?(t.openBlock(),t.createElementBlock("h1",ye,t.toDisplayString(e.title),1)):t.createCommentVNode("v-if",!0)]),_:1},8,["to"])])):t.createCommentVNode("v-if",!0),t.renderSlot(r.$slots,"sidebar-top"),t.createVNode(d,{class:"charrue-layout-sidebar-el-menu",mode:"vertical","unique-opened":"",collapse:e.collapsed,"default-active":l.activeRoutePath,"default-openeds":l.openKeys},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(a.computedMenuData,u=>(t.openBlock(),t.createBlock(c,{key:u.path,route:e.route,"sub-menu-component":e.subMenuComponent,"menu-item":u},null,8,["route","sub-menu-component","menu-item"]))),128))]),_:1},8,["collapse","default-active","default-openeds"]),t.renderSlot(r.$slots,"sidebar-bottom")],4)])}P.render=ge,P.__file="layout-internal/libs/LayoutSidebar.vue";var N={name:"LayoutContent",props:{animation:{type:Boolean,default:!0}}};const _e={class:"charrue-layout-content-container"},be={class:"charrue-layout-content-header"},Ce={class:"charrue-layout-content-main"},we={class:"charrue-layout-content-footer"};function xe(r,n,e,i,l,a){return t.openBlock(),t.createElementBlock("section",_e,[t.createElementVNode("div",be,[t.renderSlot(r.$slots,"content-header")]),t.createElementVNode("div",Ce,[e.animation?(t.openBlock(),t.createBlock(t.Transition,{key:0,name:"fade-transform",mode:"out-in"},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"content")]),_:3})):t.renderSlot(r.$slots,"content",{key:1})]),t.createElementVNode("div",we,[t.renderSlot(r.$slots,"content-footer")])])}N.render=xe,N.__file="layout-internal/libs/LayoutContent.vue";var k={name:"HamburgerTrigger",props:{isActive:{type:Boolean,default:!1}},emits:["toggle-click"],methods:{toggleClick(){this.$emit("toggle-click",this.isActive)}}};const Ee=[t.createElementVNode("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1)];function Se(r,n,e,i,l,a){return t.openBlock(),t.createElementBlock("div",{class:"hamburger-container",onClick:n[0]||(n[0]=(...o)=>a.toggleClick&&a.toggleClick(...o))},[(t.openBlock(),t.createElementBlock("svg",{class:t.normalizeClass([{"is-active":e.isActive},"hamburger-svg"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},Ee,2))])}k.render=Se,k.__file="layout-internal/libs/Hamburger.vue";var A={name:"CharrueLayout",components:{LayoutSidebar:P,LayoutContent:N,Hamburger:k},props:{collapsed:{type:Boolean,default:!1},fixedHeader:{type:Boolean,default:!0},data:{type:Array,required:!0,default(){return[]}},logo:String,title:String,sidebarWidth:{type:Array,default(){return[54,200]}},animation:{type:Boolean,default:!0},absolute:{type:Boolean,default:!1},route:{type:Boolean,default:!0},authorized:Function,homeUrl:{type:String,default:"/"},regexToPath:{type:Object}},emits:["update:collapsed"],data(){return{version:2,innerCollapse:!1}},computed:{componentConfig(){return X(this.version||2)},mainWidthStyle(){return{width:`calc(100% - ${this.collapsed?this.sidebarWidth[0]:this.sidebarWidth[1]}px)`}},headerWidthStyle(){let r="100%";return this.fixedHeader&&(r=`calc(100% - ${this.collapsed?this.sidebarWidth[0]:this.sidebarWidth[1]}px)`),{width:r}}},watch:{collapsed:{handler(r){this.innerCollapse=r},immediate:!0},innerCollapse(r){this.$emit("update:collapsed",r)}},created(){this.version=this[R].version,console.log(this)},methods:{toggleSideBar(){this.innerCollapse=!this.innerCollapse}}};const Be={class:"charrue-layout-header-main"},Pe={class:"charrue-layout-header-left"},Ne={class:"charrue-layout-header-right"};function ke(r,n,e,i,l,a){const o=t.resolveComponent("layout-sidebar"),c=t.resolveComponent("hamburger"),d=t.resolveComponent("layout-content");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["charrue-layout",[e.collapsed?"hideSidebar":"openSidebar"]])},[t.createVNode(o,{collapsed:l.innerCollapse,data:e.data,logo:e.logo,title:e.title,route:e.route,absolute:e.absolute,authorized:e.authorized,"sidebar-width":e.sidebarWidth,"home-url":e.homeUrl,"sub-menu-component":a.componentConfig.subMenu,"regex-to-path":e.regexToPath},{"sidebar-top":t.withCtx(()=>[t.renderSlot(r.$slots,"sidebar-top")]),"sidebar-bottom":t.withCtx(()=>[t.renderSlot(r.$slots,"sidebar-bottom")]),_:3},8,["collapsed","data","logo","title","route","absolute","authorized","sidebar-width","home-url","sub-menu-component","regex-to-path"]),t.createElementVNode("div",{class:"charrue-layout-main",style:t.normalizeStyle(a.mainWidthStyle)},[t.createElementVNode("div",{class:t.normalizeClass(["charrue-layout-header-container",{"fixed-header":e.fixedHeader}]),style:t.normalizeStyle(a.headerWidthStyle)},[t.createElementVNode("div",Be,[t.createElementVNode("div",Pe,[t.renderSlot(r.$slots,"header-left",{},()=>[t.createVNode(c,{onToggleClick:a.toggleSideBar},null,8,["onToggleClick"])])]),t.createElementVNode("div",Ne,[t.renderSlot(r.$slots,"header-right")])])],6),t.createVNode(d,{animation:e.animation},{"content-header":t.withCtx(()=>[t.renderSlot(r.$slots,"content-header")]),content:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),"content-footer":t.withCtx(()=>[t.renderSlot(r.$slots,"content-footer")]),_:3},8,["animation"])],4)],2)}A.render=ke,A.__file="layout-internal/libs/Layout.vue";const j=A,Ae=R;var De={install(r){r.config.globalProperties[Ae]={version:3},r.component(j.name,j)}};return De}(vue);
